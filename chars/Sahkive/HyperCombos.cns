;----------------------
;deadly.
[Statedef 3000]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 0,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3000                       ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1
poweradd=-2000


[State 0, ChangeAnim]
type = ChangeAnim
triggerall=time=0
trigger1=map(TENSHADOWS)
trigger1=power>=2000
trigger1 = RoundType>= 2
ignorehitpause = 1
value=3050
[State 0]
type = MapSet
trigger1=time=0
trigger1=map(TENSHADOWS)
ignorehitpause = 1
map = "maholine"
value=0+random%2

[State Sahkive Voices]
type = PlaySnd
triggerall=time=0
trigger1=map(TENSHADOWS)=0
trigger2=map(TENSHADOWS)
trigger2=power<2000
value = 3000,0
volumescale=200
[State Sahkive Voices]
type = PlaySnd
triggerall=time=0
triggerall=map(TENSHADOWS)
trigger1 = RoundType<2
trigger2=power<2000
trigger2 = RoundType>= 2
value = 3000,0
volumescale=200
[State Sahkive Voices]
type = PlaySnd
triggerall=time=1
triggerall=map(TENSHADOWS)
trigger1=power>=2000
trigger1 = RoundType>= 2
value = 3045+map(maholine),0
volumescale=200
channel=11

[State 0, Explod]
type = Explod
trigger1 = animelem=4
anim = 2999
ID = 2999
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;trans = 
;persistent =
supermove = 1
;pausemove = 0

[State 0, VelSet]
type = VelSet
triggerall=anim=3000
trigger1 = animelem=14
x = 20
[State 0, VelSet]
type = VelSet
triggerall=anim=3050
trigger1 = animelem=32
x = 20

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 92
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 1

[State 0, SuperPause]
type = SuperPause
triggerall = time = 0
trigger1=map(TENSHADOWS)=0
trigger2=map(TENSHADOWS)
trigger2 = RoundType<2
trigger3=map(TENSHADOWS)
trigger3=power<2000
trigger3 = RoundType>= 2
time = 52
anim = 100
sound = 20,0
pos = 0,-50
movetime = 52
darken = 0
p2defmul = 1
unhittable = 1
 
[State 0, SuperPause]
type = SuperPause
triggerall = time = 0
trigger1=map(TENSHADOWS)
trigger1=power>=2000
trigger3 = RoundType>= 2
time = 124
anim = 100
sound = 20,0
pos = 0,-50
movetime = 124
darken = 0
p2defmul = 1
unhittable = 1
;ignorehitpause = 
;persistent = 

[State 0, Explod]
type = Explod
trigger1 = time=  0
anim = F99
ID = 99
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1.4,1.4
sprpriority = 4
ontop = 1
removeongethit = 0
ignorehitpause =0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 32 < 15, 15, fvar(11) * 32)), 10
sparkno = 3          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,4
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
forcenofall=1
ground.velocity = -3,0
pausetime=10,10
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=time=0
map="patha"
value=0
ignorehitpause = 1
[State 0]
type = MapSet
trigger1=time=0
map="pathb"
value=0
ignorehitpause = 1
[State 0]
type = MapSet
trigger1=time=0
map="pathc"
value=0
ignorehitpause = 1
[State 0]
type = MapSet
trigger1=time=0
map="mash"
value=0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly L
[Statedef 3001]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 5,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3001                     ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 30
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
sparkno = 2          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=0
trigger1=map(patha)=0
map="patha"
value=1
ignorehitpause = 1
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly M
[Statedef 3002]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 5,0
ctrl = 0                         ;Set ctrl (Def: no change)                      ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1
anim=3002

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 30
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound =5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1


[State 0]
type = MapAdd
trigger1=time=1
trigger1=map(pathb)=0
trigger2=time=0
trigger2=map(pathb)=1
map="pathb"
value=1
ignorehitpause = 1
persistent=0
[State 0]
type = MapAdd
trigger1=time=0
trigger1=map(pathc)=3
map="pathc"
value=1
ignorehitpause = 1
persistent=0
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly H
[Statedef 3003]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 5,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3003                    ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 30
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=0
trigger1=map(patha)=1
map="patha"
value=1
ignorehitpause = 1
[State 0]
type = MapAdd
trigger1=time=0
trigger1=map(pathc)=4
map="pathc"
value=1
ignorehitpause = 1
persistent=0
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly 2L
[Statedef 3004]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 5,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3004                   ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 30
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=1
trigger1=map(pathb)=4
map="pathb"
value=1
ignorehitpause = 1
persistent=0
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly 2M
[Statedef 3005]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 5,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3005               ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 30
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=1
trigger1=map(pathb)=5
map="pathb"
value=1
ignorehitpause = 1
persistent=0
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly 2H
[Statedef 3006]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 5,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3006               ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 30
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2         ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=0
trigger1=map(patha)=2
map="patha"
value=1
ignorehitpause = 1
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly 4L
[Statedef 3007]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = -5,0
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=0
value = 105
elem=3

[State 0, VelSet]
type = VelSet
trigger1 = time=5
x = 10

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=5
value = 3007

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 35
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2         ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=0
trigger1=map(patha)=4
map="patha"
value=1
ignorehitpause = 1
[State 0]
type = MapAdd
trigger1=time=1
trigger1=map(pathc)=0
map="pathc"
value=1
ignorehitpause = 1
persistent=0
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly 4M
[Statedef 3008]
type    = A                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = -5,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 41                ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1
 
[State 0, VelSet]
type = VelSet
trigger1 = time=5
x = 10

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=5
value = 3008

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 35
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=0
trigger1=map(patha)=5
map="patha"
value=1
ignorehitpause = 1
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly 4H
[Statedef 3009]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 5,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3009               ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 30
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=0
trigger1=map(patha)=3
map="patha"
value=1
ignorehitpause = 1
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly R
[Statedef 3010]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 15,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3010                  ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time<=10
value = 0
;ignorehitpause = 
;persistent = 

[State 0, Turn]
type = Turn
trigger1 = movehit
ignorehitpause = 1
persistent = 0

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 30
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound =5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=1
trigger1=map(pathb)=2
map="pathb"
value=1
ignorehitpause = 1
persistent=0
[State 0]
type = MapAdd
triggerall=time=0
trigger1=map(pathc)=2
trigger2=map(pathc)=5
map="pathc"
value=1
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 50,0
ignorehitpause = 1
persistent=0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem=4
x =10
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly 2R
[Statedef 3011]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 5,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3011                ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 30
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

;malevolent shockwave
[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 1031
ID = 1031
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .84 ,.84
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

;shockwave
[state 3054]
type = Explod
trigger1 = animelem = 5
anim = 10042
ID = 10042
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 1
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 0

;dust, front
[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 6700
ID = 6700
pos = 45,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.7,0.7
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 0
;dust, back
[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 6700
ID = 6700
pos = -25,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.7,0.7
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=1
trigger1=map(pathb)=3
map="pathb"
value=1
ignorehitpause = 1
persistent=0
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly 4R
[Statedef 3012]
type    = A                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = -5,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 652               ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=0
value = 652
elem=2

[State 0, VelSet]
type = VelSet
trigger1 = time=5
x = 10

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=5
value = 3012

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 35
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 2        ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,3
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
p2stateno=3090
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0]
type = MapAdd
trigger1=time=0
trigger1=map(pathc)=1
map="pathc"
value=1
ignorehitpause = 1
[State 0]
type = MapAdd
trigger1=time=0
map="mash"
value=1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3001
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3002
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3003
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3004
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3005
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3006
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="x"
trigger1 = command="holdback"
value =3007
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="y"
trigger1 = command="holdback"
value =3008
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="z"
trigger1 = command="holdback"
value =3009
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3010
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3011
ctrl = 0
[State 0, ChangeState]
type = ChangeState
triggerall=map(mash)<6
trigger1=movehit
trigger1 = command="c"
trigger1 = command="holdback"
value =3012
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command!="holddown"
trigger1 = command!="holdback"
value =3013
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holddown"
trigger1 = command!="holdback"
value =3014
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1=movehit
trigger1 = command="b"
trigger1 = command="holdback"
value =3015
ctrl = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly S
[Statedef 3013]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 10,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 1050                ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 66
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50)), 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 3         ;No spark
sparkxy = -50,-50
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,4
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.type=low
ground.slidetime=30
ground.velocity = -20,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=45
getpower=0

[State 0, PalFX]
type = PalFX
trigger1 = time=40
trigger1=map(patha)=6
time = 10
add = 150,10,200
mul = 256,256,256
sinadd = 30,30,30,10
invertall = 0
color = 256
ignorehitpause = 1 

[State 0, ChangeState]
type = ChangeState
trigger1=time>=40
triggerall=map(patha)=6
trigger1 = command="b"
value =3019
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly 2S
[Statedef 3014]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 10,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 450                ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 35
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = 0
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 1000          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = S669,0
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
p1stateno = 3020
p2stateno=445
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=400
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly 4S
[Statedef 3015]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 10,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 1000               ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 31
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = 0
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 1000          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = S669,0
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
p1stateno = 3040 
p2stateno=1010
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = -3,0
pausetime=5,5
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=90
getpower=0

[State 0]
type = MapSet
trigger1=movehit
map="grabtimer"
value=90
ignorehitpause = 1

[State 0]
type = MapSet
trigger1=animtime=0
map="grabtimer"
value=0
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
pos = 70,0
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;deadly S finisher
[Statedef 3019]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
ctrl = 0  
velset=0,0                       ;Set ctrl (Def: no change)
anim = 3019                ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem=12
x = 19

[State Sahkive Voices]
type = PlaySnd
trigger1 = movehit
value = 3019,0+random%2
volumescale=200
ignorehitpause=1
persistent=0

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit
fv =13     ;fv = 
value = 5
ignorehitpause=1
persistent=0

[State -1, RC Jasta]
type = ChangeState
value = 690000
triggerall = command = "c"
triggerall = command = "a"
triggerall = var(15) >=500
trigger1=movehit


[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 83
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time =30
anim = 100
sound = 20,0
pos = 0,-50
movetime = 30
darken = 0
p2defmul = 1
unhittable = 1
;ignorehitpause = 
;persistent = 


[State 0, Explod]
type = Explod
trigger1 = time=  0
anim = F99
ID = 99
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1.4,1.4
sprpriority = 4
ontop = 1
removeongethit = 0


[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 92
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 1

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = 60, 10
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 3         ;No spark
sparkxy = -30,-50
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,4
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
;p1stateno = 
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.type=trip
ground.slidetime=30
ground.velocity = -20,-2
pausetime=30,30
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=40
getpower=0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = WinKO
value = 8991,0
channel = 0
ignorehitpause = 1
persistent=0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = WinKO
value = 8991,10
channel = 1
ignorehitpause = 1
persistent=0
[State 8990, AssertSpecial]
type = AssertSpecial
trigger1 = WinKO
flag = Nobardisplay
flag2 = NoFG
flag3 = Noshadow
[State 8990, AssertSpecial]
type = AssertSpecial
trigger1 = WinKO
flag = Nomusic
[State 8990, Explod]
type = Explod
trigger1 = WinKO
anim = 8992
id = 8990
pos = 160,120
scale = .5,.5
postype = Left
bindtime = -1
removetime = 35
sprpriority = -16
ownpal = 1
supermovetime = -1
persistent=0
ignorehitpause=1
[State 8990, Explod]
type = Explod
trigger1 = WinKO
anim = 8991
id = 8991
pos = 160,120
scale = .5,.5
postype = Left
bindtime = -1
removetime = -2
sprpriority = -16
ownpal = 1
supermovetime = -1
persistent=0
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;--------------------------------------------------------------------------
;deadly 2S followup
[Statedef 3020]
type    = S
movetype= A
physics = N
poweradd = 0
ctrl = 0
anim = 3020
sprpriority = 0
velset = 0,0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
triggerall=map(pathb)=6
trigger1 = time=0
time = 130
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0
[State 0, AfterImage]
type = AfterImage
triggerall=map(pathb)<6
trigger1 = time=0
time = 38
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 0, ChangeAnim]
type = ChangeAnim
triggerall=map(pathb)=6
trigger1 = animelem=7
trigger1=time<40
value = 3020
elem = 2
;ignorehitpause = 
;persistent = 

[State 0, Turn]
type = Turn
trigger1 = animelem=8
;ignorehitpause = 
;persistent = 


[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 38

[State 0, VelSet]
type = VelSet
trigger1 = time = [3,20]
x = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 21
x = 0

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (11) >= 0) && (AnimElemTime (17) < 0)
value = 0,20

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time =0 
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST
time = 28

[State 10, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 89.666666666667, -11.33333269755

[State 10, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = 75, -9.3333333333333

[State 10, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 17, -18.000001271566

[State 10, Bind 4]
type = TargetBind
trigger1 = AnimElem = 4
pos = -9.6666666666667, -22

[State 10, Bind 5]
type = TargetBind
trigger1 = AnimElem = 5
pos = -25, -25.333333333333

[State 10, Bind 6]
type = TargetBind
trigger1 = AnimElem = 6
pos = -27, -34

[State 10, Bind 7]
type = TargetBind
trigger1 = AnimElem = 7
pos = -17.666666666667, -40.666666666667

[State 10, Bind 8]
type = TargetBind
trigger1 = AnimElem = 8
pos = 15.666666666667, -34

[State 10, Throw]
type = TargetState
trigger1 = AnimElem = 9
value = 3021

[State 0, PalFX]
type = PalFX
trigger1 = time=73
trigger1=map(pathb)=6
time = 10
add = 150,10,200
mul = 256,256,256
sinadd = 30,30,30,10
invertall = 0
color = 256
ignorehitpause = 1 

[State 0, ChangeState]
type = ChangeState
trigger1=time>=70
triggerall=map(pathb)=6
trigger1 = command="b"
value =3022
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 130
trigger2 = animelem=15
trigger2=map(pathb)<6
value = 0
ctrl = 1

;-----------------------------------------------------------------
;deadly 2s tossed
[Statedef 3021]
type = A
movetype = H
physics = N
poweradd = 0
ctrl = 0

[State 0, VelSet]
type = VelSet
trigger1 = !time
trigger1=enemynear,map(pathb)=6
x = 6
y = -9

[State 0, VelSet]
type = VelSet
trigger1 = !time
trigger1=enemynear,map(pathb)<6
x = 10
y = -2

[State 1016, VelAdd]
type = VelAdd
Trigger1 = 1
y = 0.26

[State 1016, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && SelfAnimExist(5061)
value = 5061

[State 1016, ChangeAnim]
type = ChangeAnim
trigger1 = !Time && !SelfAnimExist(5061)
value = 5050

[State 1016, End]
type = SelfState
trigger1 = pos y>=0 && vel y>=0
value = 5200

;----------------------
;deadly 2S finisher
[Statedef 3022]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = vel x*0.7,0 
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3022                      ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State Sahkive Voices]
type = PlaySnd
trigger1 = time=0
value = 3022,0+random%2
volumescale=200
ignorehitpause=1
persistent=0

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 72
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time =30
anim = 100
sound = 20,0
pos = 0,-50
movetime = 30
darken = 0
p2defmul = 1
unhittable = 1
;ignorehitpause = 
;persistent = 


[State 0, VelSet]
type = VelSet
trigger1 = time=0
;trigger1 = time = [10,25]
x = 0

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (4) >= 0) && (AnimElemTime (8) < 0)
value = -5,0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
;trigger1 = time = [10,25]
x =70

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
;trigger1 = time = [10,25]
x = 10

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 6951
ID = 6951
pos = 0,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.7,0.7
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 =!movecontact
attr = S, ST          ;Attributes: Standing, Normal Throw
hitflag = MAFD          ;Affect only ground people who are not being hit
guardflag = MA
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 1000          ;No spark
sparkxy = -10,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = S669,0
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 3023
p2stateno = 1033       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = 0,0
air.velocity=0,30
pausetime=0,0
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15

[State 0, AfterImage]
type = AfterImage
triggerall = prevstateno = 100
trigger1 = time = 0
time = 25
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------
;deadly 2S rise
[Statedef 3023]
type    = A                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 0                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 12,-8                   ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 1021                       ;Change animation (Def: no change)                 ;Power to add (Def: 0)
sprpriority = 5                  ;Set p1's sprite layering priority to 2 (in front)

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 130
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
y = 20


[State 10, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = -21.666666666667, -5

[State 10, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = -21.666666666667, -5

[State 10, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = -21.666666666667, -5

[State 10, Bind 4]
type = TargetBind
trigger1 = AnimElem = 4
pos = -21.666666666667, -5

[State 10, Bind 5]
type = TargetBind
trigger1 = AnimElem = 5
pos = -21.666666666667, -5

[State 10, Bind 6]
type = TargetBind
trigger1 = AnimElem = 6
pos = -21.666666666667, -5

[State 1055, 6] ;Change state when KFM is close to ground
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -15
value = 3024

;deadly 2S fall
;-----------------------------
[Statedef 3024]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 0
ctrl = 0
anim =1022
velset = 0,0
sprpriority = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit
fv =13     ;fv = 
value = 5
ignorehitpause=1
persistent=0

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 39
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 200, 2]
type = PlaySnd
trigger1 = time = 0
value = 6, 2

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6700
ID = 6700
pos = -30,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
scale =0.64,0.64
sprpriority = 1
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6700
ID = 6700
pos = -30,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
scale =0.64,0.64
sprpriority = 1
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1

[State 1900, dust]
type = explod
trigger1 = time = 0
anim = 10043
id = 10043
pos = -30,0
scale = 1.3,1
sprpriority = 4
bindtime = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
facing = -1
;removetime = -1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10042
ID = 10042
pos = -30,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 1
scale = 1.45,1.45
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
fv =13     ;fv = 
value = 1.5

[State 1041, 2]
type = hitdef 
trigger1 = time = 0
attr = S, ST
damage = 10, 10
animtype  = Hard
hitflag = MAF
guardflag = HA
pausetime = 6,6
sparkno = 3
sparkxy = -20,-10
hitsound   = 5,4
guardsound = 6,2
ground.type = Low
ground.slidetime = 12
ground.hittime  = 45
air.hittime  = 136
down.hittime = 136
ground.velocity =-1,-11
air.velocity = -1,-11
fall  = 1
fall.yvelocity = 0
;down.bounce = 3
envshake.time = 10
envshake.freq = 90
envshake.ampl = 6
fall.envshake.time = 0
fall.envshake.freq = 0
fall.envshake.ampl = 0
palfx.time = 20
palfx.add = 100, 0,20
guard.velocity = -6
guard.hittime = 30
guard.slidetime = 19
guard.ctrltime = 24
getpower = 0
snap = -20,30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = WinKO
value = 8991,0
channel = 0
ignorehitpause = 1
persistent=0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = WinKO
value = 8991,10
channel = 1
ignorehitpause = 1
persistent=0
[State 8990, AssertSpecial]
type = AssertSpecial
trigger1 = WinKO
flag = Nobardisplay
flag2 = NoFG
flag3 = Noshadow
[State 8990, AssertSpecial]
type = AssertSpecial
trigger1 = WinKO
flag = Nomusic
[State 8990, Explod]
type = Explod
trigger1 = WinKO
anim = 8992
id = 8990
pos = 160,120
scale = .5,.5
postype = Left
bindtime = -1
removetime = 35
sprpriority = -16
ownpal = 1
supermovetime = -1
persistent=0
ignorehitpause=1
[State 8990, Explod]
type = Explod
trigger1 = WinKO
anim = 8991
id = 8991
pos = 160,120
scale = .5,.5
postype = Left
bindtime = -1
removetime = -2
sprpriority = -16
ownpal = 1
supermovetime = -1
persistent=0
ignorehitpause=1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;----------------
;deadly 4S followup
[Statedef 3040]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 0                      ;Number of air juggle points move takes
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3040                       ;Change animation (Def: no change)
sprpriority = 2   

[State 77]
type = bgpalfx
trigger1 = 1
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1
[State 0, AfterImage]
type = AfterImage
trigger2=power<2000
trigger1 = map(pathc)<6
triggerall = time=0
time = 63
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0
[State 0, AfterImage]
type = AfterImage
trigger1=power>=2000
trigger1 = map(pathc)=6
triggerall = time=0
time = 180
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger2=power<2000
trigger1 = map(pathc)<6
triggerall=time=0
value = 1008

[State 0, HitDef]
type = HitDef
trigger1 = animelem = 1
attr = S, ST
hitflag = MAFD
sparkno = -1
air.hittime = 999
ground.hittime = 999
fall = 1

[State 0]
type = MapSet
trigger1 = time=0
map="sgrab"
value=1
ignorehitpause = 1

[State 0]
type = MapSet
trigger1 = time=0
map="grabtimer"
value=90
ignorehitpause = 1

[State 0, HitAdd]
type = HitAdd
trigger1 = animelem = 1
value = -1
ignorehitpause = 1
persistent = 0

;TargetBinds
[State 0, TargetBind]
type = TargetBind
trigger1 = animelemtime(2)>=0
trigger1 = animelemtime(3)<0
time = 1
pos = 30, -14
[State 0, TargetBind]
type = TargetBind
trigger1 = animelemtime(3)>=0
trigger1 = animelemtime(4)<0
time = 1
pos = 14, -18
[State 0, TargetBind]
type = TargetBind
trigger1 = animelemtime(4)>=0
trigger1 = animelemtime(5)<0
time = 1
pos = -20, -10
[State 0, TargetBind]
type = TargetBind
trigger1 = animelemtime(5)>=0
trigger1 = animelemtime(6)<0
time = 1
pos = -45, -14
[State 0, TargetBind]
type = TargetBind
trigger1 = animelemtime(6)>=0
trigger1 = animelemtime(7)<0
time = 1
pos = -55, -18
[State 0, TargetBind]
type = TargetBind
trigger1 = animelemtime(7)>=0
trigger1 = animelemtime(8)<0
time = 1
pos = -65, -22
[State 0, TargetBind]
type = TargetBind
trigger1 = animelemtime(8)>=0
trigger1 = animelemtime(9)<0
time =1
pos = -45, -25
[State 0, TargetBind]
type = TargetBind
trigger1 = animelemtime(9)>=0
trigger1 = animelemtime(10)<0
time = 1
pos = -30, -70
[State 0, TargetBind]
type = TargetBind
trigger1 = animelemtime(10)>=0
trigger1 = animelemtime(11)<0
time = 1
pos = 60, -20

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 2
x = 8
;ignorehitpause = 
;persistent = 
[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 8
x = 3
;ignorehitpause = 
;persistent = 

[State 0]
type = hitdef 
p2facing = 1
trigger1 = map(pathc)=6
trigger1=power>=2000
trigger1 = animelem = 5
attr = S, ST
damage = 0
animtype = hard
hitflag = MAFD
guardflag = MAFD
priority = 3
pausetime = 0,0
hitsound   = 5,3
guardsound = 6,2
ground.type = low
ground.slidetime = 5
guard.slidetime = 9
ground.hittime  = 26
ground.velocity = -5,10
airguard.velocity = 3,-.8
air.type = high
air.velocity = -5,10
air.hittime = 60
fall.yvelocity = -15
fall.damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50))
p2facing = 1
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -7
guard.hittime = 21
guard.slidetime = 13
guard.ctrltime = 20
getpower = 25*var(2)
fall=1

[State 0]
type = hitdef 
p2facing = 1
trigger1 = map(pathc)<6
trigger2 = power<2000
triggerall = animelem = 5
attr = S, ST
damage = 0
animtype = hard
hitflag = MAFD
guardflag = MAFD
priority = 3
pausetime = 0,0
hitsound   = 5,3
guardsound = 6,2
ground.type = low
ground.slidetime = 5
guard.slidetime = 9
ground.hittime  = 26
ground.velocity = -5,10
airguard.velocity = 3,-.8
air.type = high
air.velocity = -5,10
air.hittime = 60
fall.yvelocity =0
fall.damage = ceil(ifElse(fvar(11) * 50 < 15, 15, fvar(11) * 50))
p2facing = 1
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -7
guard.hittime = 21
guard.slidetime = 13
guard.ctrltime = 20
getpower = 25*var(2)
fall=1

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem=12
time = 12
freq = 100
ampl =6
phase = 10
ignorehitpause=1

[State 0, TargetState]
type = TargetState
trigger1 = animelem = 1
value = 1013

[State 0, PalFX]
type = PalFX
triggerall=power>=2000
trigger1 = time=72
trigger1 = map(pathc)=6
time = 10
add = 150,10,200
mul = 256,256,256
sinadd = 30,30,30,10
invertall = 0
color = 256
ignorehitpause = 1 

[State 0, ChangeState]
type = ChangeState
trigger1=time>=72
triggerall=map(pathc)=6
triggerall=power>=2000
trigger1 = command="b"
value =3041
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time>180
trigger2 = anim=1008
trigger2=animtime=0
value = 0
ctrl = 1

;----------------------
;Horizon Buster
[Statedef 3041]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = vel x*0.7,0 
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3041                     ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1
poweradd=-2000

[State Sahkive Voices]
type = PlaySnd
triggerall = time = 0
trigger1=map(TENSHADOWS)=0
trigger2=map(TENSHADOWS)
trigger2 = RoundType<2
value = 3041,0
volumescale=200
ignorehitpause=1
persistent=0
[State Sahkive Voices]
type = PlaySnd
triggerall =animelem=7
trigger1=map(TENSHADOWS)=0
trigger2=map(TENSHADOWS)
trigger2 = RoundType<2
value = 3041,1
volumescale=200
ignorehitpause=1
persistent=0

[State Sahkive Voices]
type = PlaySnd
triggerall=time=0
triggerall=map(TENSHADOWS)
trigger1 = RoundType>= 2
value = 3045+map(maholine),1
volumescale=200
ignorehitpause=1
persistent=0

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit
fv =13     ;fv = 
value = 5
ignorehitpause=1
persistent=0

[State 77]
type = bgpalfx
trigger1 = 1
triggerall=map(RAGA)=0
time = 1
add= -80,-80,-80
ignorehitpause = 1
persistent = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 183
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 0

[State 0, SuperPause]
type = SuperPause
trigger1 = time =0
time =30
pos = 0,-50
movetime = 30
darken = 0
p2defmul = 1
unhittable = 1
anim=915020
;ignorehitpause = 
;persistent = 

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 30
time = 70
anim = 100
sound = 20,0
pos = 0,-50
movetime = 70
darken = 0
p2defmul = 1
unhittable = 1
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
type = VelSet
trigger1 = time=0
;trigger1 = time = [10,25]
x = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 7
;trigger1 = time = [10,25]
x =90

[State 0, VelSet]
type = VelSet
trigger1 = movehit
;trigger1 = time = [10,25]
x =50
persistent=0

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 1

[State 0, Explod]
type = Explod
trigger1 = animelem=7
anim = 3043
ID = 3043
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 100
pausemovetime = 0
scale = 0.84,0.6
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause =1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem=8
id = 3043

[State 0, Explod]
type = Explod
trigger1 = animelem=8
anim = 3042
ID = 3042
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.84,0.6
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause =1
persistent=0

[State 800, 1] ;With grab sound
type = HitDef
Trigger1 = !movecontact
attr = S, HA          ;Attributes: Standing, Normal Throw
hitflag = MAFD        ;Affect only ground people who are not being hit
guardflag=HA
damage = ceil(cond(fvar(11) * 499 < 230, 230, fvar(11) * 499)),60
priority = 3,Hit    ;Throw has low priority, must be miss or dodge type.
sparkno = 13         ;No spark
sparkxy = -50,-50
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = 5,4
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
envshake.time = 50
envshake.freq = 120
envshake.ampl = 12
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.slidetime=30
pausetime=50,50
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
ground.hittime=40
getpower=0

[State 0, TargetState]
type = TargetBind
trigger1 = movehit
pos = 80,0
ignorehitpause =1
time=1
persistent=0

[State 0, TargetState]
type = TargetState
trigger1 = movehit
value =3042
ignorehitpause = 0
persistent=0

[State 0, AfterImage]
type = AfterImage
triggerall = prevstateno = 100
trigger1 = time = 0
time = 25
length = 25
palcolor = 256
palinvertall = 1
palbright = 50,-5,50
palcontrast = 100,5,70
palpostbright = 100,0,100
paladd = 100,10,200
persistent = 1
framegap = 1
Trans = add
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = WinKO
value = 8991,0
channel = 0
ignorehitpause = 1
persistent=0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = WinKO
value = 8991,10
channel = 1
ignorehitpause = 1
persistent=0
[State 8990, AssertSpecial]
type = AssertSpecial
trigger1 = WinKO
flag = Nobardisplay
flag2 = NoFG
flag3 = Noshadow
[State 8990, AssertSpecial]
type = AssertSpecial
trigger1 = WinKO
flag = Nomusic
[State 8990, Explod]
type = Explod
trigger1 = WinKO
anim = 8992
id = 8990
pos = 160,120
scale = .5,.5
postype = Left
bindtime = -1
removetime = 35
sprpriority = -16
ownpal = 1
supermovetime = -1
persistent=0
ignorehitpause=1
[State 8990, Explod]
type = Explod
trigger1 = WinKO
anim = 8991
id = 8991
pos = 160,120
scale = .5,.5
postype = Left
bindtime = -1
removetime = -2
sprpriority = -16
ownpal = 1
supermovetime = -1
persistent=0
ignorehitpause=1

[State 0, RemapPal]
type = RemapPal
triggerall=map(TENSHADOWS)
trigger1 = RoundType>= 2
trigger1 =movehit
source = 1,1
dest = 2,1
ignorehitpause=1
[State 0, VarAdd]
type = MapAdd
triggerall=map(TENSHADOWS)
trigger1 = RoundType>= 2
trigger1 =movehit
map = "RAGA"
value = 1
ignorehitpause = 1
persistent=0
[State -3, Win Voices] ;Win
type = PlayBgm
triggerall=map(TENSHADOWS)
triggerall = RoundType>= 2
triggerall =movehit
triggerall= map(RAGA)=1
trigger1=enemy,name!="angous"
trigger2=enemynear,name="angous"
trigger2=enemynear,palno!=12
trigger3=enemynear,name="angous"
trigger3=enemynear,palno=12
trigger3=enemynear,var(28)=0
bgm="sound\tst.wav"
ignorehitpause = 1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;get fucked idiot
[Statedef 3042]
type    = A                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= H                     ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
velset = -10,-17
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 6160                     ;Change animation (Def: no change)
sprpriority = 1                  ;Set p1's sprite layering priority to 2 (in front)

[State 30001, AngleDraw]
type = AngleDraw
trigger1 = 1
[State 30001, AngleAdd]
type = AngleAdd
trigger1 = Time%2 = 0
value = 45

[State 0, ChangeState]
type = SelfState
trigger1 = pos y >=-16
trigger1 = vel y >0
value = 5100
ctrl = 0

;-----------------------------------------------------------
; deadly Hurt
[Statedef 3090]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 5000

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = hitshakeover
value = 5005


[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 6]
type = selfstate
trigger1 = enemynear,map(grabtimer)=0
value = 0
ctrl = 1

;----------------------
;Super Grab Attempt
[Statedef 3100]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = vel x*0.5,0 
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3100                       ;Change animation (Def: no change)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
poweradd=-2000

[State 0, VarAdd]
type = MapSet
trigger1 = time=0
map = "truth"
value = 1+random%10
ignorehitpause = 1

[State Sahkive Voices]
type = PlaySnd
trigger1=time=1
trigger1 = map(truth)>=10
value = 3101,0
volumescale=200

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time <=69
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause = 
;persistent = 



[State 0, SuperPause]
type = SuperPause
trigger1 = time = 10
time = 60
anim = 100
sound = 20,0
pos = 0,-50
movetime = 60
darken = 1
p2defmul = 1
unhittable = 1
;ignorehitpause = 
;persistent = 

[State 0, Explod]
type = Explod
trigger1 = time=  0
anim = F99
ID = 99
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1.4,1.4
sprpriority = 4
ontop = 1
removeongethit = 0
ignorehitpause =0

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (4) >= 0) && (AnimElemTime (8) < 0)
value = -5,0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 1
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 2
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
x = 3

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 3

[State 800, 1] ;With grab sound
type = HitDef
trigger1 = teammode!=tag
Trigger1 = !movecontact
trigger1 = enemynear,statetype!=A
attr = S, HT          ;Attributes: Standing, Normal Throw
hitflag = MFD        ;Affect only ground people who are not being hit
sparkno = 1000          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = S669,0
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 3101
p2stateno = 1049
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = 0,0
air.velocity=0,30
pausetime=0,0
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
[State 800, 1] ;With grab sound
type = HitDef
trigger1 = teammode!=tag
Trigger1 = !movecontact
trigger1 = enemynear,statetype=A
attr = S, HT          ;Attributes: Standing, Normal Throw
hitflag = MAFD+        ;Affect only ground people who are not being hit
sparkno = 1000          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = S669,0
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 3101
p2stateno = 1049
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = 0,0
air.velocity=0,30
pausetime=0,0
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15



[State 800, 1] ;With grab sound
type = HitDef
trigger1 = teammode=tag
Trigger1 = !movecontact
trigger1 = enemynear,statetype!=A
attr = S, HT          ;Attributes: Standing, Normal Throw
hitflag = MFD        ;Affect only ground people who are not being hit
sparkno = 1000          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = S669,0
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 3101
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = 0,0
air.velocity=0,30
pausetime=0,100
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15
[State 800, 1] ;With grab sound
type = HitDef
trigger1 = teammode=tag
Trigger1 = !movecontact
trigger1 = enemynear,statetype=A
attr = S, HT          ;Attributes: Standing, Normal Throw
hitflag = MAFD+        ;Affect only ground people who are not being hit
sparkno = 1000          ;No spark
sparkxy = -20,-30
p1sprpriority = 1     ;Draw p1's sprite in front of p2
hitsound = S669,0
guardsound = 6,2            ;p2's sprite priority is set to 0 by default
p1facing = 1
p2facing = 1          ;Force p2 to face KFM
p1stateno = 3101
guard.dist = 0        ;This prevents p2 from going into a guard state if close
forcestand = 1              ;Force p2 into falling down
air.fall = 1
ground.velocity = 0,0
air.velocity=0,30
pausetime=0,100
guard.pausetime = 12,12
guard.velocity = -5
guard.hittime = 12
guard.ctrltime = 11
guard.slidetime = 15


[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;----------------------
;Super Grab GET
[Statedef 3101]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
velset = 0,0
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 3101                      ;Change animation (Def: no change)
sprpriority = -5            ;Set p1's sprite layering priority to 2 (in front)
facep2 = 1

[State Sahkive Voices]
type = PlaySnd
triggerall =  time=0
triggerall = map(truth)<10
trigger1 = palno!=11
trigger2 = palno=11&&roundtype<=1
value = 3100,0+random%3
volumescale=200
[State Sahkive Voices]
type = PlaySnd
triggerall=time=1
triggerall = map(truth)<10
trigger1 = palno=11&&roundtype>=2
value = 3102,0
volumescale=200

[State Sahkive Voices]
type = PlaySnd
trigger1=time=0
trigger1 = map(truth)>=10
value = 3101,2
[State Sahkive Voices]
type = PlaySnd
trigger1=time=40
trigger1 = map(truth)>=10
value = 3101,1
volumescale=200
[State Sahkive Voices]
type = PlaySnd
trigger1=animelem=84
trigger1 = map(truth)>=10
value = 3101,3

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit
trigger1=animelem=85
fv =13     ;fv = 
value = 5
ignorehitpause=1
persistent=0

[State -1, RC Jasta]
type = ChangeState
value = 690000
triggerall = command = "c"
triggerall = command = "a"
triggerall = var(15) >=500
trigger1=time>166


[State 0, sprpriority]
type = sprpriority
trigger1 = time<30
value = 2
ignorehitpause = 1

[State 0, sprpriority]
type = sprpriority
trigger1 = time>=30
value = -5
ignorehitpause = 1

[State 0]
type = MapSet
trigger1 = time=0
map="grabtimer"
value=90
ignorehitpause = 1

;TargetBinds
[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 2
time = 9999
pos = 30, -14
[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 3
time = 9999
pos = 14, -18
[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
time = 9999
pos = -10, -10
[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
time = 9999
pos = -25, -14
[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 6
time = 9999
pos = -35, -18
[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 7
time = 9999
pos = -45, -22
[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 8
time = 9999
pos = -25, -25
[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 9
time = 9999
pos = 0, -70

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 10
time = 1
pos = 10,-8



[State 0]
type = hitdef 
p2facing = 1
trigger1 = animelem =10
attr = S, HT
kill=0
damage = 0
animtype = hard
hitflag = MAFD
guardflag = MAFD
pausetime = 0,0
hitsound   = 5,3
guardsound = 6,2
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
ground.type =low
ground.slidetime = 5
guard.slidetime = 9
ground.hittime  =999
ground.velocity = 0,30
airguard.velocity = 3,-.8
air.type =low
air.velocity = 0,30
air.hittime = 999
fall.yvelocity = -4
fall.damage=ceil(cond(fvar(11) *100 < 40, 40, fvar(11) * 100))
p2facing = 1
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -7
guard.hittime = 21
guard.slidetime = 13
guard.ctrltime = 20
getpower = 25*var(2)
fall=1
fall.kill =0
air.fall=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem =15||animelem =19||animelem =23||animelem =27||animelem =31||animelem =35||animelem =41||animelem =38
trigger2 = time>95&&time<130&& time%3=0
value = F5,3
volumescale = 45
persistent = 1
ignorehitpause=1

[State 0]
type = hitdef 
p2facing = 1
kill=0
trigger1 = animelem =15||animelem =19||animelem =23||animelem =27||animelem =31||animelem =35||animelem =41||animelem =38
trigger2 = time>95&&time<140
attr = S, HT
damage = ceil(cond(fvar(11) *10 < 1, 1, fvar(11) * 10))
animtype = hard
hitflag = MAFD
guardflag = MAFD
sparkxy = -20,-10
pausetime = 0,10
guardsound = 6,2
ground.type =low
ground.slidetime = 5
guard.slidetime = 9
ground.hittime  = 999
ground.velocity = 0,30
airguard.velocity = 3,-.8
envshake.time = 10
envshake.freq = 130
envshake.ampl = 5
air.type =low
air.velocity = 0,30
air.hittime = 999
fall.yvelocity = -3
p2facing = 1
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -7
guard.hittime = 21
guard.slidetime = 13
guard.ctrltime = 20
getpower = 25*var(2)
fall=1
air.fall=1

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem=75
time = 30
anim = 100
pos = 0,-50
movetime = 30
darken = 1
p2defmul = 1
unhittable = 1
;ignorehitpause = 
;persistent = 

[State 1041, 2]
type = hitdef 
p2facing = 1
trigger1 = animelem=85
attr = S, HT
damage =ceil(cond(fvar(11) *60 < 50, 50, fvar(11) * 60))
animtype  = Hard
hitflag = MAF
guardflag = HA
pausetime = 15,15
sparkno = 3
sparkxy = -20,-30
hitsound   = 5,4
guardsound = 6,2
ground.type = Low
ground.slidetime = 12
ground.hittime  = 45
air.hittime  = 136
down.hittime = 136
ground.velocity = -1.4,22
air.velocity = -1.4,22
fall  = 1
fall.yvelocity = -4.3
fall.xvelocity = -4.3
;down.bounce = 3
envshake.time = 30
envshake.freq = 130
envshake.ampl = 5
envshake.phase = 1
fall.envshake.time = 0
fall.envshake.freq = 0
fall.envshake.ampl = 0
palfx.time = 20
palfx.add = 100, 0,20
guard.velocity = -6
guard.hittime = 30
guard.slidetime = 19
guard.ctrltime = 24
getpower = 0


[State 0, Explod]
type = Explod
trigger1 = animelem=85
anim = 3102
ID = 3102
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.84,0.84
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause =1
;trans = 
;persistent =
;supermove = 0
;pausemove = 0

[State 0, Explod]
type = Explod
trigger1 = animelem=85
anim = 3103
ID = 3103
pos = 0,110
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,-0.01
accel = 0,-0.01
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause =1
;trans = 
;persistent =
;supermove = 0
;pausemove = 0

[State 0, Explod]
type = Explod
trigger1 = animelem=85
anim = 3104
ID = 3104
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause =1
;trans = 
;persistent =
;supermove = 0
;pausemove = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = WinKO
value = 8991,0
channel = 0
ignorehitpause = 1
persistent=0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = WinKO
value = 8991,10
channel = 1
ignorehitpause = 1
persistent=0
[State 8990, AssertSpecial]
type = AssertSpecial
trigger1 = WinKO
flag = Nobardisplay
flag2 = NoFG
flag3 = Noshadow
[State 8990, AssertSpecial]
type = AssertSpecial
trigger1 = WinKO
flag = Nomusic
[State 8990, Explod]
type = Explod
trigger1 = WinKO
anim = 8992
id = 8990
pos = 160,120
scale = .5,.5
postype = Left
bindtime = -1
removetime = 35
sprpriority = -16
ownpal = 1
supermovetime = -1
persistent=0
ignorehitpause=1
[State 8990, Explod]
type = Explod
trigger1 = WinKO
anim = 8991
id = 8991
pos = 160,120
scale = .5,.5
postype = Left
bindtime = -1
removetime = -2
sprpriority = -16
ownpal = 1
supermovetime = -1
persistent=0
ignorehitpause=1

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 86
time = 1
pos = 30,-6

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 1
value = SCA
;value2 = S,NA
time = 1
;ignorehitpause = 
;persistent = 

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem=90
x = 45
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
